<html>
    <head>
        <link rel="shortcut icon" href="#">
          <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
        <script src="https://d3js.org/d3-dsv.v1.min.js"></script>
        <script src="https://d3js.org/d3-fetch.v1.min.js"></script>
    </head>
    <body>
        <img src="./Juvvo.png" style="width:200px; height: auto" />
        <div class="container-fluid"> 
            <div class="col-lg-12">

                <h2>Ankle Symptoms</h2>
                <div class="panel panel-default">
                    <div class="panel-body">
                        <div class="row">
                            <label class="col-lg-2">Acute?</label>
                            <select class="col-lg-1" id="ankle-acute-symptom">
                                <option value="1">Yes</option>
                                <option value="0">No</option>
                            </select>
                        </div>

                        <div class="row">
                            <label class="col-lg-2">Swelling?</label>
                            <select class="col-lg-1" id="ankle-swelling-symptom">
                                <option value="1">Yes</option>
                                <option value="0">No</option>
                            </select>
                        </div>

                        <div class="row">
                            <label class="col-lg-2">Bruising/Tenderness?</label>
                            <select class="col-lg-1" id="ankle-bruising-symptom">
                                <option value="1">Yes</option>
                                <option value="0">No</option>
                            </select>
                        </div>

                        <div class="row">
                            <label class="col-lg-2">Can you bear weight comfortably?</label>
                            <select class="col-lg-1" id="ankle-weight-bearing-symptom">
                                <option value="1">Yes</option>
                                <option value="0">No</option>
                            </select>
                        </div>

                        <div class="row">
                            <label class="col-lg-2">Did you hear a loud pop?</label>
                            <select class="col-lg-1" id="ankle-loud-pop-symptom">
                                <option value="1">Yes</option>
                                <option value="0">No</option>
                            </select>
                        </div>

                        <div class="row">
                            <label class="col-lg-2">Stiffness?</label>
                            <select class="col-lg-1" id="ankle-stiffness-symptom">
                                <option value="1">Yes</option>
                                <option value="0">No</option>
                            </select>
                        </div>
                        <input type="button" id="submit-symptoms" value="Submit"/>
                    </div>
                </div>

                <h2>Response</h2>
                <div class="panel panel-default">
                    <div class="panel-body">
                        <div id="output"></div>
                    </div>
                </div>
            </div>        
        </div>
    </body>
    <script type="text/javascript">
        var ankle_symptoms_dict;
        d3.csv("./ankle_symptoms.csv").then(function(data) {
            ankle_symptoms_dict = data;
        });

        $("#submit-symptoms").on("click", function(){
            var lookUpKey = "";
            var aas = $("#ankle-acute-symptom").find(":selected").val();
            var asws = $("#ankle-swelling-symptom").find(":selected").val();
            var abs = $("#ankle-bruising-symptom").find(":selected").val();
            var awbs = $("#ankle-weight-bearing-symptom").find(":selected").val();
            var alp = $("#ankle-loud-pop-symptom").find(":selected").val();
            var ass = $("#ankle-stiffness-symptom").find(":selected").val();
            for(var i = 0; i < ankle_symptoms_dict.length; i++){
                if(ankle_symptoms_dict[i]["Acute"] == aas && ankle_symptoms_dict[i]["Swelling"] == asws && 
                    ankle_symptoms_dict[i]["Bruising/Tenderness"] == abs && ankle_symptoms_dict[i]["Can you bear weight comfortably?"] == awbs && 
                    ankle_symptoms_dict[i]["Did you hear a loud pop?"] == alp && ankle_symptoms_dict[i]["Stiffness"] == ass ){
                    console.log(ankle_symptoms_dict[i]["Output"]);
                    $("#output").text(ankle_symptoms_dict[i]["Output"]);
                }
            }

        });


    </script>
</html>