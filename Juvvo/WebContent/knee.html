<html>
    <head>
        <link rel="shortcut icon" href="#">
          <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
        <script src="https://d3js.org/d3-dsv.v1.min.js"></script>
        <script src="https://d3js.org/d3-fetch.v1.min.js"></script>
    </head>
    <body>
        <img src="./Juvvo.png" style="width:200px; height: auto" />
        <div class="container-fluid"> 
            <div class="col-lg-12">

                <h2>Knee Symptoms</h2>
                <div class="panel panel-default">
                    <div class="panel-body">
                        <div class="row">
                            <label class="col-lg-2">Acute?</label>
                            <select class="col-lg-1" id="knee-acute-symptom">
                                <option value="1">Yes</option>
                                <option value="0">No</option>
                            </select>
                        </div>

                        <div class="row">
                            <label class="col-lg-2">Swelling</label>
                            <select class="col-lg-1" id="knee-swelling-symptom">
                                <option value="1">Yes</option>
                                <option value="0">No</option>
                            </select>
                        </div>

                        <div class="row">
                            <label class="col-lg-2">Does your knee feel unstable?</label>
                            <select class="col-lg-1" id="knee-unstable-symptom">
                                <option value="1">Yes</option>
                                <option value="0">No</option>
                            </select>
                        </div>

                        <div class="row">
                            <label class="col-lg-2">Can you bear weight comfortably?</label>
                            <select class="col-lg-1" id="knee-weight-symptom">
                                <option value="1">Yes</option>
                                <option value="0">No</option>
                            </select>
                        </div>

                        <div class="row">
                            <label class="col-lg-2">Did you hear a loud pop?</label>
                            <select class="col-lg-1" id="knee-pop-symptom">
                                <option value="1">Yes</option>
                                <option value="0">No</option>
                            </select>
                        </div>

                        <div class="row">
                            <label class="col-lg-2">Stiffness</label>
                            <select class="col-lg-1" id="knee-stiffness-symptom">
                                <option value="1">Yes</option>
                                <option value="0">No</option>
                            </select>
                        </div>

                        <div class="row">
                            <label class="col-lg-2">Pain on the side of the knee</label>
                            <select class="col-lg-1" id="knee-side-symptom">
                                <option value="1">Yes</option>
                                <option value="0">No</option>
                            </select>
                        </div>

                            <div class="row">
                            <label class="col-lg-2">Pain more centrally located in the knee</label>
                            <select class="col-lg-1" id="knee-central-symptom">
                                <option value="1">Yes</option>
                                <option value="0">No</option>
                            </select>
                        </div>

                            <div class="row">
                            <label class="col-lg-2">Pain in the back of the knee</label>
                            <select class="col-lg-1" id="knee-back-symptom">
                                <option value="1">Yes</option>
                                <option value="0">No</option>
                            </select>
                        </div> 

                            <div class="row">
                            <label class="col-lg-2">Pain in he medial side of knee</label>
                            <select class="col-lg-1" id="knee-medial-symptom">
                                <option value="1">Yes</option>
                                <option value="0">No</option>
                            </select>
                        </div> 

                            <div class="row">
                            <label class="col-lg-2">Pain lower part of knee</label>
                            <select class="col-lg-1" id="Pain lower part of knee">
                                <option value="1">Yes</option>
                                <option value="0">No</option>
                            </select>
                        </div> 

                        <div class="row">
                            <label class="col-lg-2">Pain walking up or down stairs</label>
                            <select class="col-lg-1" id="knee-stairs-symptom">
                                <option value="1">Yes</option>
                                <option value="0">No</option>
                            </select>
                        </div>
                        <input type="button" id="submit-symptoms" value="Submit"/>
                    </div>
                </div>
            </div>

                <h2>Response</h2>
                <div class="panel panel-default">
                    <div class="panel-body">
                        <div id="output"></div>
                    </div>
                </div>
            </div>        
        </div>
    </body>
    <script type="text/javascript">
        var knee_symptoms_dict;
        d3.csv("./knee_symptoms.csv").then(function(data) {
            knee_symptoms_dict = data;
        });

        $("#submit-symptoms").on("click", function(){
            var lookUpKey = "";
            var kas = $("#knee-acute-symptom").find(":selected").val();
            var kss = $("#knee-swelling-symptom").find(":selected").val();
            var kus = $("#knee-unstable-symptom").find(":selected").val();
            var kws = $("#knee-weight-symptom").find(":selected").val();
            var kps = $("#knee-pop-symptom").find(":selected").val();
            var ksfs = $("#knee-stiffness-symptom").find(":selected").val();
            var ksds = $("#knee-side-symptom").find(":selected").val();
            var kcs = $("#knee-central-symptom").find(":selected").val();
            var kbs = $("#knee-back-symptom").find(":selected").val();
            var kms = $("#knee-medial-symptom").find(":selected").val();
            var kls = $("#knee-lower-symptom").find(":selected").val();
            var ksts = $("#knee-stairs-symptom").find(":selected").val();
            for(var i = 0; i < knee_symptoms_dict.length; i++){
                if(knee_symptoms_dict[i]["Acute"] == kas && knee_symptoms_dict[i]["Swelling"] == kss && 
                    knee_symptoms_dict[i]["Does your knee feel unstable?"] == kus && knee_symptoms_dict[i]["Can you bear weight comfortably?"]
                    == kws && knee_symptoms_dict[i]["Did you hear a loud pop?"] == kps && knee_symptoms_dict[i]["Stiffness"] == ksfs 
                    && knee_symptoms_dict[i]["Pain on the side of the knee"] == ess 
                    && knee_symptoms_dict[i]["Pain more centrally located in the knee"] ==kcs && knee_symptoms_dict[i]["Pain in the back of the knee"] == kbs && knee_symptoms_dict[i]["Pain in he medial side of knee"] == kms && knee_symptoms_dict[i]["Pain lower part of knee"] == kls && 
                    knee_symptoms_dict[i]["Pain walking up or down stairs"] == ksts){
                    console.log(knee_symptoms_dict[i]["Output"]);
                    $("#output").text(knee_symptoms_dict[i]["Output"]);
                }
            }

        });


    </script>
</html>